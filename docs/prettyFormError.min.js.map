{"version":3,"names":[],"mappings":"","sources":["prettyFormError.js"],"sourcesContent":["function _optionsConfig(e){var r,t=e||{},o=t.classError||\"prettyFormError\",n=t.callToAction||\"button\",i=t.elementError||\"div\",l=t.focusErrorOnClick||!0,c={fadeOut:!1,timer:0},a={enabled:!1,selector:\".multiCheckbox\"},u=t.fadeOutError||c,d=t.multiCheckbox||a;if(r=\"positionMethod\"in t?\"after\"===t.positionMethod?\"afterend\":\"beforebegin\":\"afterend\",isNaN(Number(u.timer))){var f=\"fadeOutError.timer options is not a number\";console.error(f),u.timer=6e3}else u.timer=Number(u.timer);return{classError:o,elementError:i,positionMethod:r,multiCheckbox:d,callToAction:n,focusErrorOnClick:l,fadeOutError:u}}function _getInvalidElems(e){var r=e.querySelectorAll(\":invalid:not(fieldset)\"),t=[];return[].forEach.call(r,function(e){e.validity.valid||t.push(e)}),t}function _changeHandler(e,r){var t=document.querySelectorAll(r+\":checked\").length;if(t>0)for(var o=0;o<e.length;o++)e[o].removeAttribute(\"required\");else for(var n=0;n<e.length;n++)e[n].setAttribute(\"required\",\"required\")}function _showErrorForInvalidSelector(e,r){if(0===e.length){var t=\"I couldn't fine any DOM element for the selector \\\"\"+r+'\"';console.warn(t)}}function prettyFormErrorInstance(e,r){function t(e){if(e){var r=e.querySelectorAll(\".\"+l.classError);[].forEach.call(r,function(e){e.remove()})}}function o(e,r,t){var o=document.createElement(e);o.classList.add(l.classError),o.textContent=r.validationMessage,r.insertAdjacentElement(t,o)}function n(){return new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.length>0&&e.addedNodes[0].classList.add(\"prettyFormError-fade\")})})}function i(e){var r=e.querySelector(l.callToAction);r&&r.addEventListener(\"click\",function r(i){i.target.removeEventListener(\"click\",r),document.addEventListener(\"invalid\",function(e){e.preventDefault()}),i.preventDefault();var c=_getInvalidElems(e);if(document.querySelector(\".\"+l.classError)&&t(e),[].forEach.call(c,function(e){o(l.elementError,e,l.positionMethod)}),l.focusErrorOnClick&&c.length>0&&c[0].focus(),l.fadeOutError.fadeOut){var a=n(),u={attributes:!0,childList:!0,characterData:!0};a.observe(e,u),setTimeout(function(){},l.fadeOutError.timer),0===c.length&&(a.disconnect(),a=null)}if(l.multiCheckbox.enabled){var d=l.multiCheckbox.selector,f=document.querySelectorAll(d);[].forEach.call(f,function(e){e.addEventListener(\"change\",function(){_changeHandler(f,d)})})}if(0===c.length){var s=e.querySelectorAll(\":valid\");[].forEach.call(s,function(e){e.value=\"\"}),e.submit()}})}var l=_optionsConfig(r);if(\"undefined\"==typeof jQuery){var c=document.querySelectorAll(e);_showErrorForInvalidSelector(c,e),[].forEach.call(c,function(e){i(e)})}else{var a=$(e);_showErrorForInvalidSelector(a,e),$.each(a,function(e,r){i(r)})}}function prettyFormError(e,r){return prettyFormErrorInstance(e,r)}\"undefined\"!=typeof jQuery&&($.fn.prettyFormError=function(e){var r=\"prettyFormError\",t=\"plugin_\"+r;return this.each(function(){$.data(this,t)||$.data(this,t,prettyFormError(this,e))})}),\"object\"==typeof module&&\"object\"==typeof module.exports&&(module.exports=prettyFormError);"],"file":"prettyFormError.min.js"}