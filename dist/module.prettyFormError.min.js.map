{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/module.prettyFormError.js","src/utils/index.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","PrettyFormError","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_clickHandlerNodeList","elements","options","_onClickHandler","_changeHandler","checkboxes","cssSelector","checkedCount","document","querySelectorAll","removeAttribute","_i","setAttribute","element","button","querySelector","callToAction","addEventListener","event","preventDefault","invalids","valids","fadeOutError","fadeOut","classError","_utils","utils","_removeOldErrors","observer","_fadeOutErrorConfig","config","attributes","childList","characterData","observe","setTimeout","disconnect","_createErrorElement","elementError","positionMethod","_clearValidInputs","focusErrorOnClick","focus","multiCheckbox","enabled","selector","forEach","input","init","isHTMLElement","Element","NodeList","HTMLCollection","tempElem","_convertToArray","_setOpts","_valuePositonChecker","userValue","arguments","undefined","notFound","indexOf","toLowerCase","console","warn","tempFadeOpt","fadeOutOpts","tempMulti","oldErrors","error","remove","invalid","createElement","textContent","validationMessage","classList","add","insertAdjacentElement","valid","value","MutationObserver","mutations","mutation","addedNodes"],"mappings":"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","file":"module.prettyFormError.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// \n/* global IprettyError */\n\nimport { utils } from './utils';\n\n/** Global factory for PrettyFormError\n *  using vanilla JS\n * @returns {Function} init(element, options)\n */\n\nfunction PrettyFormError() {\n    /**\n   * Applies click handler for collection\n   * @param {*} elements Array of HTMLElements\n   * @param {*} options User options or defaults\n   * @return {void}\n   */\n  function _clickHandlerNodeList( elements, options ) {\n    for ( let i = 0; i < elements.length; i++ ) {\n      _onClickHandler( elements[ i ], options );\n    }\n  }\n\n  /**\n   * setup for multi checkboxes that needs validation\n   * @param {string} checkboxes NodeList to iterate through\n   * @param {string} cssSelector common css selector for all checkboxes\n   * @returns {void}\n   */\n  function _changeHandler( checkboxes, cssSelector ) {\n    const checkedCount = document.querySelectorAll( `${cssSelector}:checked` ).length;\n\n    if ( checkedCount > 0 ) {\n      for ( let i = 0; i < checkboxes.length; i++ ) {\n        checkboxes[ i ].removeAttribute( 'required' );\n      }\n    } else {\n      for ( let i = 0; i < checkboxes.length; i++ ) {\n        checkboxes[ i ].setAttribute( 'required', 'required' );\n      }\n    }\n  }\n\n  /**\n   * Append click event for element within the form\n   * @param {HTMLElement} element form element to apply\n   * @param {*} options User options or defaults\n   * @return {void}\n   */\n  function _onClickHandler( element, options ) {\n    const button = element.querySelector( `${options.callToAction}` );\n\n    if ( button ) {\n      button.addEventListener( 'click', ( event ) => {\n        event.preventDefault();\n        const invalids = element.querySelectorAll( ':invalid' );\n        const valids = element.querySelectorAll( ':valid' );\n\n        // removing old errors\n        if ( !options.fadeOutError.fadeOut && document.querySelector( `.${options.classError}` )) {\n          utils._removeOldErrors( element,  options.classError );\n        }\n        // fading old errors\n        if ( options.fadeOutError.fadeOut ) {\n          let observer = utils._fadeOutErrorConfig();\n          const config = { attributes: true, childList: true, characterData: true };\n          observer.observe( element, config );\n\n          setTimeout(() => {\n            utils._removeOldErrors( element,  options.classError );\n          }, 6200 );\n\n          // clearing observer\n          if ( invalids.length === 0 && valids.length > 0 ) {\n            observer.disconnect();\n            observer = null;\n          }\n        }\n\n        // adding new errors\n        if ( invalids.length > 0 ) {\n          utils._createErrorElement(\n            invalids,\n            options.elementError,\n            options.classError,\n            options.positionMethod\n          );\n        }\n\n        // clearing valid inputs\n        if ( invalids.length === 0 && valids.length > 0 ) {\n          utils._clearValidInputs( valids );\n        }\n\n        // focusing on first errrored input\n        if ( invalids.length > 0 && options.focusErrorOnClick ) {\n          invalids[ 0 ].focus();\n        }\n\n        // multiCheckbox configuration\n        if ( options.multiCheckbox.enabled ) {\n          const selector = options.multiCheckbox.selector;\n          const checkboxes = document.querySelectorAll( selector );\n\n          [].forEach.call( checkboxes, input => {\n            input.addEventListener( 'change', () => {\n              _changeHandler( checkboxes, selector );\n            });\n          });\n        }\n      });\n    }\n  }\n\n  return {\n    init: (\n      element,\n      options\n ) => {\n      const isHTMLElement = element instanceof Element ||\n        element instanceof NodeList ||\n        element instanceof HTMLCollection;\n      let tempElem;\n\n      // seting default element for empty case\n      isHTMLElement ?\n        tempElem = utils._convertToArray( element ) :\n        tempElem = document.querySelectorAll( 'form' );\n\n      // seting user props or default\n      // and adding click handler\n      _clickHandlerNodeList( tempElem, utils._setOpts( options ));\n    }\n  };\n}\n\nmodule.exports = PrettyFormError;\n","// \n/* global IprettyError */\n\n/**\n * Assignement a default value and checking valid one for positionMethod prop\n * @param {string} [userValue='afterend'] user value\n * @returns {string} value for positionMethod prop\n */\nconst _valuePositonChecker = ( userValue = 'afterend' ) => {\n  const notFound = [ 'beforebegin', 'afterend' ].indexOf( userValue.toLowerCase()) === -1;\n  if ( notFound ) {\n    console.warn( 'positionMethod prop value should be \"beforebegin\" or \"afterend\", a default \"afterend\" value has been assigned' );\n  }\n  return notFound ?\n    'afterend' :\n    userValue.toLowerCase();\n};\n\nexport const utils = {\n    /** Setting defualt properties values if user\n   *  doesn't specify them\n   * @param {IprettyError} options Object implementing IprettyError\n   * @returns {void}\n   */\n  _setOpts: ( options = {}) => {\n    const tempFadeOpt = {fadeOut: false, fadeOutOpts: ''};\n    const tempMulti = {enabled: false, selector: '.multiCheckbox'};\n    const callToAction = options.callToAction || 'button';\n    const elementError = options.elementError || 'div';\n    const classError = options.classError || 'prettyFormError';\n    const positionMethod = _valuePositonChecker( options.positionMethod );\n    const focusErrorOnClick = options.focusErrorOnClick || true;\n    const fadeOutError = options.fadeOutError || tempFadeOpt;\n    const multiCheckbox = options.multiCheckbox || tempMulti;\n\n    return {\n      callToAction,\n      elementError,\n      classError,\n      positionMethod,\n      focusErrorOnClick,\n      fadeOutError,\n      multiCheckbox\n    };\n  },\n\n  /** Converts actual element into array\n   * @param {HTMLElement} element Element/s selected by user\n   * @returns {Array<HTMLElement>} Elements into an array\n   */\n  _convertToArray: ( element ) => {\n    return ( element instanceof Element ) ?\n      [element] :\n      element;\n  },\n\n    /** Romoves old errors displayed in screen\n   * @param {EventTarget} element Current form that is validated\n   * @param {string} cssSelector css class name to serach and delete\n   * @return {void}\n   */\n  _removeOldErrors: ( element, cssSelector ) => {\n    if ( element ) {\n      const oldErrors = element.querySelectorAll( `.${cssSelector}` );\n      [].forEach.call( oldErrors, ( error ) => {\n        error.remove();\n      });\n    }\n  },\n\n  /**\n   * Creates HTML to hold the error for all invalid inputs\n   * @param {NodeList<HTMLElement>} invalids Invalid inputs for actual submited form\n   * @param {string} element User or default element defined for error\n   * @param {string} classError User or default css class for error\n   * @param {string} positionMethod User or default css class for error\n   * @return {void}\n   */\n  _createErrorElement: (\n    invalids,\n    element,\n    classError,\n    positionMethod\n  ) => {\n    [].forEach.call( invalids, ( invalid ) => {\n      const tempElem = document.createElement( element );\n      tempElem.textContent = invalid.validationMessage;\n      tempElem.classList.add( `${classError}` );\n      invalid.insertAdjacentElement( positionMethod, tempElem );\n    });\n  },\n\n  /**\n   * Set inputs values as empty string for those that are valid\n   * @param {NodeList<HTMLElement>} valids Valids inputs when form is submitted\n   * @return {void}\n   */\n  _clearValidInputs: ( valids ) => {\n    [].forEach.call( valids, ( valid ) => {\n      valid.value = '';\n    });\n  },\n\n    /**\n   * Adds CSS class with animation so error can fadeout\n   * @returns {MutationObserver} mutation observer constructor\n   */\n  _fadeOutErrorConfig: () => {\n    return new MutationObserver( mutations => {\n      mutations.forEach( mutation => {\n        if ( mutation.addedNodes.length > 0 ) {\n          ( mutation.addedNodes[ 0 ] ).classList.add( 'prettyFormError-fade' );\n        }\n      });\n    });\n  }\n};\n"]}